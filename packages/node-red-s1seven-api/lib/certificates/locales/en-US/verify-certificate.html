<script type="text/html" data-help-name="verify certificate">
  <p>Verifies a certificate using S1Seven's servers.</p>

  <h3>Inputs</h3>
  <dl class="message-properties">
    <dt>
      payload
      <span class="property-type">string | buffer | object</span>
    </dt>
    <dd>the certificate to verify.</dd>
    <dt class="optional">
      environment <span class="property-type">staging | production</span>
    </dt>
    <dd>
      choose the environment that you want to use - app.s1seven.dev or
      app.s1seven.com. Defaults to production (app.s1seven.com).
    </dd>
    <dt class="optional">version <span class="property-type">1</span></dt>
    <dd>
      choose the version of the api to use. It can be set in the config node.
      Defaults to <code>1</code>
    </dd>
    <dt class="optional">
      mode <span class="property-type">test | live</span>
    </dt>
    <dd>
      allows you to choose which mode you want to use -
      <code>test</code> mode or <code>live</code> mode. Defaults to
      <code>test</code>. Note that the mode from the application or access token
      takes precedence over the value selected in the UI.
    </dd>
  </dl>

  <h3>Outputs</h3>
  <ol class="node-ports">
    <li>
      Success output
      <dl class="message-properties">
        <dt>payload <span class="property-type">object</span></dt>
        <dd>
          the response from the HTTP request. If the request is successful, the
          response will contain a property called <code>isValid</code> which
          will contain either <code>true</code> if the certificate is valid or
          <code>false</code> if not.
        </dd>
      </dl>
    </li>
    <li>
      Failure output
      <dl class="message-properties">
        <dt>payload <span class="property-type">object</span></dt>
        <dd>the error response from the HTTP request.</dd>
        <dt>headers <span class="property-type">object</span></dt>
        <dd>the headers from the HTTP response.</dd>
      </dl>
    </li>
  </ol>

  <h3>Details</h3>
  <p>
    <code>msg.payload</code> is used as the payload of the POST request. It
    should contain the certificate to be hashed. If it contains an buffer or
    JSON string it will be converted to an object before being sent.
  </p>
  <p>
    The certificate can also be read from the global property "certificate". If
    <code>msg.payload</code> is present, it will have priority over
    <code>global.certificate</code>.
  </p>
  <p>
    The following properties can be added via the admin ui, found by
    double-clicking on the hash node, or by passing them in using the
    <code>msg</code> object. If they are passed in via the
    <code>msg</code> object, they will have priority over the values found in
    the admin ui. This allows the values to be overridden dynamically if
    necessary. For example, if both <code>msg.companyId</code> and a companyId
    added via the admin ui are present, <code>msg.companyId</code> will be used
    instead of the admin ui access token.
  </p>
  <p>
    <code>msg.environment</code> allows you to pass in the string value
    <code>staging</code> or <code>production</code> to choose which server you
    wish to use. Learn more about our environments
    <a href="https://developers.s1seven.com/docs/environments/">here</a>.
  </p>
  <p>
    It can also be passed in using the api-config node, found by double-clicking
    on the hash node.
  </p>
</script>
